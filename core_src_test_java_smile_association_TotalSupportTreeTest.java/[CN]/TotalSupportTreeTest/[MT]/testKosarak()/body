{
  System.out.println("kosarak");
  List<int[]> dataList=new ArrayList<int[]>(1000);
  try {
    InputStream stream=getClass().getResourceAsStream("/smile/data/transaction/kosarak.dat");
    BufferedReader input=new BufferedReader(new InputStreamReader(stream));
    String line;
    for (int nrow=0; (line=input.readLine()) != null; nrow++) {
      if (line.trim().isEmpty()) {
        continue;
      }
      String[] s=line.split(" ");
      Set<Integer> items=new HashSet<Integer>();
      for (int i=0; i < s.length; i++) {
        items.add(Integer.parseInt(s[i]));
      }
      int j=0;
      int[] point=new int[items.size()];
      for (      int i : items) {
        point[j++]=i;
      }
      dataList.add(point);
    }
  }
 catch (  IOException ex) {
    System.err.println(ex);
  }
  int[][] data=dataList.toArray(new int[dataList.size()][]);
  int n=Math.max(data);
  System.out.format("%d transactions, %d items%n",data.length,n);
  long time=System.currentTimeMillis();
  FPGrowth fpgrowth=new FPGrowth(data,1500);
  System.out.format("Done building FP-tree: %.2f secs.%n",(System.currentTimeMillis() - time) / 1000.0);
  time=System.currentTimeMillis();
  TotalSupportTree ttree=fpgrowth.buildTotalSupportTree();
  System.out.format("Done building total support tree: %.2f secs.%n",(System.currentTimeMillis() - time) / 1000.0);
  time=System.currentTimeMillis();
  assertEquals(219725,ttree.getFrequentItemsets().size());
}
